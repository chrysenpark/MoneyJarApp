{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/ChrysenPark/Downloads/MoneyJarApp/src/main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from\"axios\";import history from\"./history\";import Button from\"./Components/Buttons\";import Wrapper from\"./Components/Wrapper\";import Message from\"./Components/Message\";import Title from\"./Components/Title\";import OpenJar from\"./Components/OpenJar\";import{get}from\"lodash-es\";import Scrollbar from\"react-scrollbars-custom\";import Jar from\"./Components/Jar\";import{useLocation}from\"react-router\";var jarInfo=JSON.parse(localStorage.getItem('jar'));var username=localStorage.getItem('user');function JarContents(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),donation=_useState2[0],setDonation=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),withdrawal=_useState4[0],setWithdrawal=_useState4[1];var _useState5=useState('Enter Username'),_useState6=_slicedToArray(_useState5,2),contributor=_useState6[0],setContributor=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),rename=_useState8[0],setRename=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),transactions=_useState10[0],setTransactions=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),shareError=_useState12[0],setShareError=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),shareSuccess=_useState14[0],setShareSuccess=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),renameSuccess=_useState16[0],setRenameSuccess=_useState16[1];var _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),donateSuccess=_useState18[0],setDonateSuccess=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),withdrawSuccess=_useState20[0],setWithdrawSuccess=_useState20[1];var location=useLocation();useEffect(function(){window.scrollTo(0,0);},[location]);useEffect(function(){getTransactions().then(function(data){setTransactions(data);}).catch(function(err){console.log(err);});},[]);var donate=function donate(event){event.preventDefault();var username=window.localStorage.getItem('user');return axios.put('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/donate/'+username+\"/\"+jarInfo.id,donation,{\"headers\":{\"content-type\":\"application/json\"}}).then(function(response){var message=get(donateSuccess,'response.data.error_description','Successfully donated!');setDonateSuccess(message);jarInfo.amount=parseInt(jarInfo.amount)+parseInt(donation);localStorage.setItem('jar',JSON.stringify(jarInfo));window.location.reload();console.log(response);}).catch(function(err){console.log(err);});};var withdraw=function withdraw(event){event.preventDefault();var username=window.localStorage.getItem('user');return axios.put('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/withdraw/'+username+\"/\"+jarInfo.id,withdrawal,{\"headers\":{\"content-type\":\"application/json\"}}).then(function(response){var message=get(withdrawSuccess,'response.data.error_description','Successfully withdrawn!');setWithdrawSuccess(message);jarInfo.amount=parseInt(jarInfo.amount)-parseInt(withdrawal);localStorage.setItem('jar',JSON.stringify(jarInfo));window.location.reload();console.log(response);}).catch(function(err){console.log(err);});};var getTransactions=function getTransactions(){return axios.get('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/transactions/'+jarInfo.id).then(function(response){console.log(response.data);return response.data;}).catch(function(err){console.log(err);});};var shareJar=function shareJar(event){event.preventDefault();return axios.post('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/share/'+jarInfo.id,contributor,{\"headers\":{\"content-type\":\"application/json\"}}).then(function(response){console.log(response);var message=get(shareSuccess,'response.data.error_description','Successfully shared!');setShareSuccess(message);}).catch(function(shareError){setShareError(shareError.response.data.message);});};var renameJar=function renameJar(event){event.preventDefault();return axios.put('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/rename/'+jarInfo.id,rename,{\"headers\":{\"content-type\":\"application/json\"}}).then(function(response){var message=get(renameSuccess,'response.data.error_description','Successfully renamed!');setRenameSuccess(message);jarInfo.name=rename;localStorage.setItem('jar',JSON.stringify(jarInfo));window.location.reload();console.log(response);}).catch(function(err){console.log(err);});};var deleteJar=function deleteJar(event){event.preventDefault();axios.delete('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/'+username+'/'+jarInfo.id).then(function(response){history.push(\"/dashboard\");localStorage.removeItem('jar');window.location.reload();}).catch(function(err){console.log(err);});};var getType=function getType(transactionInfo){var type=transactionInfo.type;return\"\".concat(type);};var getTransactionsAmount=function getTransactionsAmount(transactionInfo){var amount=transactionInfo.amount;return\"\".concat(amount);};var getUsername=function getUsername(transactionInfo){var username=transactionInfo.username;return\"\".concat(username);};var getDate=function getDate(transactionInfo){var date=transactionInfo.date;return\"\".concat(date);};var getJarImage=function getJarImage(){var num=parseInt(jarInfo.amount);if(num===0)return\"OpenJarEmpty\";else if(num>500)return\"OpenJarFull\";else if(num<500)return\"OpenJarHalf\";};var handleChange=function handleChange(setField){return function(event){setField(event.target.value);setShareError(false);};};return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',left:80},children:/*#__PURE__*/_jsx(Button,{type:\"button\",buttonStyle:\"btn--play--solid\",buttonSize:\"btn-small\",onClick:function onClick(){localStorage.removeItem('jar');history.push(\"/dashboard\");window.location.reload();},children:\"Back to Jars\"})}),\"\\xA0\\xA0\\xA0 \",jarInfo.creator===username&&/*#__PURE__*/_jsx(Button,{type:\"button\",buttonStyle:\"btn--danger--solid\",buttonSize:\"btn-small\",onClick:deleteJar,children:\"Delete\"}),/*#__PURE__*/_jsx(Title,{main:jarInfo.name+' Jar'}),/*#__PURE__*/_jsx(OpenJar,{Class:getJarImage(),Name:jarInfo.name,Amount:jarInfo.amount}),/*#__PURE__*/_jsxs(Scrollbar,{style:{width:300,height:200,position:'relative',top:50},trackYVisible:true,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Transactions\"}),transactions.map(function(transactionInfo,id){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h4\",{children:getType(transactionInfo)+\"    \"+\"$\"+getTransactionsAmount(transactionInfo)+\"  \"+getUsername(transactionInfo)+\" \"+getDate(transactionInfo)})},id);})]}),/*#__PURE__*/_jsx(Message,{message:\"\"}),jarInfo.creator===username&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{value:rename,onChange:handleChange(setRename),type:\"text\"}),\"\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(Button,{type:\"button\",buttonStyle:\"btn--team--solid\",buttonSize:\"btn-small\",onClick:renameJar,children:\"Rename\"}),renameSuccess&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:renameSuccess})]}),/*#__PURE__*/_jsx(Message,{message:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{value:donation,onChange:handleChange(setDonation),type:\"number\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(Button,{type:\"button\",buttonStyle:\"btn--rank--solid\",buttonSize:\"btn-small\",onClick:donate,children:\"Donate\"}),donateSuccess&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:donateSuccess})]}),/*#__PURE__*/_jsx(Message,{message:\"\"}),jarInfo.creator===username&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{value:withdrawal,onChange:handleChange(setWithdrawal),type:\"number\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(Button,{type:\"button\",buttonStyle:\"btn--primary--solid\",buttonSize:\"btn-small\",onClick:withdraw,children:\"Withdraw\"}),withdrawSuccess&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:withdrawSuccess})]}),/*#__PURE__*/_jsx(Message,{message:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{value:contributor,onChange:handleChange(setContributor),type:\"text\"}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(Button,{type:\"button\",buttonStyle:\"btn--warning--solid\",buttonSize:\"btn-small\",onClick:shareJar,children:\"Share\"}),shareError&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:shareError}),shareSuccess&&/*#__PURE__*/_jsx(\"p\",{style:{color:'green'},children:shareSuccess})]})]});}export default JarContents;","map":{"version":3,"sources":["/Users/ChrysenPark/Downloads/MoneyJarApp/src/main/frontend/src/JarContents.js"],"names":["React","useEffect","useState","axios","history","Button","Wrapper","Message","Title","OpenJar","get","Scrollbar","Jar","useLocation","jarInfo","JSON","parse","localStorage","getItem","username","JarContents","donation","setDonation","withdrawal","setWithdrawal","contributor","setContributor","rename","setRename","transactions","setTransactions","shareError","setShareError","shareSuccess","setShareSuccess","renameSuccess","setRenameSuccess","donateSuccess","setDonateSuccess","withdrawSuccess","setWithdrawSuccess","location","window","scrollTo","getTransactions","then","data","catch","err","console","log","donate","event","preventDefault","put","id","response","message","amount","parseInt","setItem","stringify","reload","withdraw","shareJar","post","renameJar","name","deleteJar","delete","push","removeItem","getType","transactionInfo","type","getTransactionsAmount","getUsername","getDate","date","getJarImage","num","handleChange","setField","target","value","position","left","creator","width","height","top","map","color"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport axios from \"axios\";\nimport history from \"./history\";\nimport Button from \"./Components/Buttons\";\nimport Wrapper from \"./Components/Wrapper\";\nimport Message from \"./Components/Message\";\nimport Title from \"./Components/Title\";\nimport OpenJar from \"./Components/OpenJar\";\nimport {get} from \"lodash-es\";\nimport Scrollbar from \"react-scrollbars-custom\";\nimport Jar from \"./Components/Jar\";\nimport {useLocation} from \"react-router\";\n\n\n\nconst jarInfo = JSON.parse(localStorage.getItem('jar'));\nconst username = localStorage.getItem('user');\n\nfunction JarContents() {\n    const [donation, setDonation] = useState('');\n    const [withdrawal, setWithdrawal] = useState('');\n    const [contributor, setContributor] = useState('Enter Username');\n    const [rename, setRename] = useState('');\n    const [transactions, setTransactions] = useState([]);\n    const [shareError, setShareError] = useState(null);\n    const [shareSuccess, setShareSuccess] = useState(null);\n    const [renameSuccess, setRenameSuccess] = useState(null);\n    const [donateSuccess, setDonateSuccess] = useState(null);\n    const [withdrawSuccess, setWithdrawSuccess] = useState(null);\n\n    const location = useLocation();\n\n    useEffect(() => {\n        window.scrollTo(0, 0);\n    }, [location]);\n\n    useEffect(() => {\n        getTransactions().then((data) => {\n            setTransactions(data);\n        }).catch((err) => {\n            console.log(err);\n        });\n    }, []);\n\n    const donate = (event) => {\n        event.preventDefault();\n        const username = window.localStorage.getItem('user');\n        return axios.put('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/donate/' + username + \"/\" + jarInfo.id,  donation, {\n            \"headers\": {\n                \"content-type\": \"application/json\",\n            },\n        }\n        ).then((response) => {\n            const message = get(\n                donateSuccess,\n                'response.data.error_description',\n                'Successfully donated!',\n            );\n            setDonateSuccess(message);\n            jarInfo.amount = parseInt(jarInfo.amount) + parseInt(donation);\n            localStorage.setItem('jar', JSON.stringify(jarInfo));\n            window.location.reload();\n            console.log(response);\n        }).catch((err) => {\n            console.log(err);\n        });\n    };\n\n    const withdraw = (event) => {\n        event.preventDefault();\n        const username = window.localStorage.getItem('user');\n        return axios.put('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/withdraw/' + username + \"/\" + jarInfo.id,  withdrawal, {\n                \"headers\": {\n                    \"content-type\": \"application/json\",\n                },\n            }\n        ).then((response) => {\n            const message = get(\n                withdrawSuccess,\n                'response.data.error_description',\n                'Successfully withdrawn!',\n            );\n            setWithdrawSuccess(message);\n            jarInfo.amount = parseInt(jarInfo.amount) - parseInt(withdrawal);\n            localStorage.setItem('jar', JSON.stringify(jarInfo));\n            window.location.reload();\n            console.log(response);\n        }).catch((err) => {\n            console.log(err);\n        });\n    };\n\n\n    const getTransactions = () => {\n        return axios\n            .get('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/transactions/' + jarInfo.id)\n            .then((response) => {\n                console.log(response.data);\n                return response.data;\n            }).catch((err) => {\n                console.log(err);\n            });\n    };\n\n    const shareJar = (event) => {\n        event.preventDefault();\n        return axios.post('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/share/' + jarInfo.id, contributor, {\n                \"headers\": {\n                    \"content-type\": \"application/json\",\n                },\n            }\n        ).then((response) => {\n            console.log(response);\n            const message = get(\n                shareSuccess,\n                'response.data.error_description',\n                'Successfully shared!',\n            );\n            setShareSuccess(message);\n        }).catch((shareError) => {\n            setShareError(shareError.response.data.message);\n        });\n    };\n\n\n    const renameJar = (event) => {\n        event.preventDefault();\n        return axios.put('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/rename/' + jarInfo.id, rename, {\n                \"headers\": {\n                    \"content-type\": \"application/json\",\n                },\n            }\n        ).then((response) => {\n            const message = get(\n                renameSuccess,\n                'response.data.error_description',\n                'Successfully renamed!',\n            );\n            setRenameSuccess(message);\n            jarInfo.name = rename;\n            localStorage.setItem('jar', JSON.stringify(jarInfo));\n            window.location.reload();\n            console.log(response);\n        }).catch((err) => {\n            console.log(err);\n        });\n    };\n\n    const deleteJar = (event) => {\n        event.preventDefault();\n        axios.delete('http://moneyjar-env.eba-spmiem8y.us-east-2.elasticbeanstalk.com/api/jars/' + username + '/' + jarInfo.id\n        ).then((response) => {\n            history.push(\"/dashboard\");\n            localStorage.removeItem('jar');\n            window.location.reload();\n        }).catch((err) => {\n            console.log(err);\n        });\n    };\n\n\n    const getType = (transactionInfo) => {\n        const {type} = transactionInfo;\n        return `${type}`\n    };\n\n    const getTransactionsAmount = (transactionInfo) => {\n        const {amount} = transactionInfo;\n        return `${amount}`\n    };\n\n    const getUsername = (transactionInfo) => {\n        const {username} = transactionInfo;\n        return `${username}`\n    };\n\n    const getDate = (transactionInfo) => {\n        const {date} = transactionInfo;\n        return `${date}`\n    };\n\n    const getJarImage = () => {\n        const num = parseInt(jarInfo.amount);\n        if(num === 0) return \"OpenJarEmpty\";\n        else if(num > 500) return \"OpenJarFull\";\n        else if(num < 500) return \"OpenJarHalf\";\n    };\n\n    const handleChange = (setField) => (event) => {\n        setField(event.target.value);\n        setShareError(false);\n    };\n\n    return (\n        <Wrapper>\n            <div  style= {{position: 'absolute', left: 80}}>\n            <Button type =\"button\"  buttonStyle=\"btn--play--solid\" buttonSize=\"btn-small\"\n                    onClick={() =>  {\n                        localStorage.removeItem('jar');\n                        history.push(\"/dashboard\");\n                        window.location.reload();\n                    }}>Back to Jars</Button>\n            </div>\n            &nbsp;&nbsp;&nbsp; {jarInfo.creator === username && <Button type =\"button\"  buttonStyle=\"btn--danger--solid\" buttonSize=\"btn-small\" onClick={deleteJar}>Delete</Button>}\n\n            <Title main = {jarInfo.name + ' Jar'}/>\n            <OpenJar\n                Class = {getJarImage()}\n                Name = {jarInfo.name}\n                Amount = {jarInfo.amount}\n            />\n            <Scrollbar style={{ width: 300, height: 200, position: 'relative', top:50}} trackYVisible>\n                <h2>{\"Transactions\"}</h2>\n                {transactions.map((transactionInfo, id) => (\n                    <div key={id}>\n                        <h4>{getType(transactionInfo) +  \"    \" + \"$\" + getTransactionsAmount(transactionInfo) + \"  \" +  getUsername(transactionInfo) + \" \" + getDate(transactionInfo)}</h4>\n                    </div>\n                ))}\n            </Scrollbar>\n            <Message message={\"\"} />\n            {jarInfo.creator === username &&\n            <div>\n                <input\n                    value = {rename}\n                    onChange={handleChange(setRename)}\n                    type= \"text\"\n                />\n                &nbsp;&nbsp;&nbsp;\n                <Button type =\"button\"  buttonStyle=\"btn--team--solid\" buttonSize=\"btn-small\" onClick={renameJar}>\n                    Rename\n                </Button>\n                {renameSuccess && <p style={{color: 'green'}}>{renameSuccess}</p>}\n            </div>}\n            <Message message={\"\"} />\n            <div>\n                <input\n                    value = {donation}\n                    onChange={handleChange(setDonation)}\n                    type= \"number\"\n                />\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <Button type =\"button\"  buttonStyle=\"btn--rank--solid\" buttonSize=\"btn-small\" onClick={donate}>\n                    Donate\n                </Button>\n                {donateSuccess && <p style={{color: 'green'}}>{donateSuccess}</p>}\n            </div>\n            <Message message={\"\"} />\n            {jarInfo.creator === username &&\n            <div>\n                <input\n                    value={withdrawal}\n                    onChange={handleChange(setWithdrawal)}\n                    type=\"number\"\n                />\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <Button type=\"button\" buttonStyle=\"btn--primary--solid\" buttonSize=\"btn-small\" onClick={withdraw}>\n                    Withdraw\n                </Button>\n                {withdrawSuccess && <p style={{color: 'green'}}>{withdrawSuccess}</p>}\n            </div>}\n            <Message message={\"\"} />\n            <div>\n                <input\n                    value = {contributor}\n                    onChange={handleChange(setContributor)}\n                    type=\"text\"/>\n                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                <Button type =\"button\"  buttonStyle=\"btn--warning--solid\" buttonSize=\"btn-small\" onClick={shareJar}>\n                    Share\n                </Button>\n                    {shareError && <p style={{color: 'red'}}>{shareError}</p>}\n                    {shareSuccess && <p style={{color: 'green'}}>{shareSuccess}</p>}\n            </div>\n\n\n        </Wrapper>\n    )\n}\n\nexport default JarContents;"]},"metadata":{},"sourceType":"module"}